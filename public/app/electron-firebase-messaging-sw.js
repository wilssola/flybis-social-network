console.log("electron-renderer.js loaded");const{ipcRenderer:ipcRenderer}=require("electron");const{START_NOTIFICATION_SERVICE:START_NOTIFICATION_SERVICE,NOTIFICATION_SERVICE_STARTED:NOTIFICATION_SERVICE_STARTED,NOTIFICATION_SERVICE_ERROR:NOTIFICATION_SERVICE_ERROR,NOTIFICATION_RECEIVED:NOTIFICATION_RECEIVED,TOKEN_UPDATED:TOKEN_UPDATED}=require("electron-push-receiver/src/constants");const Toastify=require("toastify-js");ipcRenderer.on(NOTIFICATION_SERVICE_STARTED,((_,token)=>{window.messagingToken=token;console.log("FCM: "+token)}));ipcRenderer.on(NOTIFICATION_SERVICE_ERROR,((_,error)=>{console.log("FCM Request Error",error)}));ipcRenderer.on(TOKEN_UPDATED,((_,refreshedToken)=>{window.messagingToken=refreshedToken;console.log("FCM Refreshed: "+refreshedToken)}));ipcRenderer.on(NOTIFICATION_RECEIVED,((_,payload)=>{if(payload.notification.body){console.log("Message Received",payload);let notification=new Notification(payload.notification.title,{body:payload.notification.body,image:payload.notification.image,icon:payload.notification.icon});notification.onclick=()=>{console.log("Notification Clicked");ipcRenderer.send("notification_clicked")};Toastify({avatar:"",text:payload.notification.body,duration:5e3,close:true,gravity:"bottom",position:"left",backgroundColor:"black",stopOnFocus:true,onClick:()=>{}}).showToast()}else{console.log("No body use the key/value pairs in the payload data",payload.data)}}));const senderId="505131215378";console.log("FCM Request Success");ipcRenderer.send(START_NOTIFICATION_SERVICE,senderId);